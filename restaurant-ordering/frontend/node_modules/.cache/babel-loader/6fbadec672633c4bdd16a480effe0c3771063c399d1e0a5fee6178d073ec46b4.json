{"ast":null,"code":"import _objectSpread from\"/Users/howiewang/Downloads/restaurant-ordering/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import axios from'axios';import{useCart}from'../contexts/CartContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CheckoutModal=_ref=>{let{isOpen,onClose,onSuccess}=_ref;const{cartItems,getTotalPrice}=useCart();const[customerInfo,setCustomerInfo]=useState({name:'',phone:'',address:'',notes:''});const[loading,setLoading]=useState(false);if(!isOpen)return null;const handleSubmit=async e=>{e.preventDefault();if(!customerInfo.name||!customerInfo.phone||!customerInfo.address){alert('ËØ∑Â°´ÂÜôÂÆåÊï¥ÁöÑÈÖçÈÄÅ‰ø°ÊÅØ');return;}setLoading(true);try{const response=await axios.post('/api/orders',{items:cartItems,total:getTotalPrice(),customerInfo});if(response.data.success){alert(\"\\u8BA2\\u5355\\u63D0\\u4EA4\\u6210\\u529F\\uFF01\\u8BA2\\u5355\\u53F7\\uFF1A\".concat(response.data.orderId));onSuccess();}}catch(error){alert('ËÆ¢ÂçïÊèê‰∫§Â§±Ë¥•ÔºåËØ∑ÈáçËØï');console.error('Order submission error:',error);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 z-50\",onClick:onClose}),/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-xl max-w-md w-full p-6\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4 text-gray-800\",children:\"\\u786E\\u8BA4\\u8BA2\\u5355\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"\\u59D3\\u540D *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:customerInfo.name,onChange:e=>setCustomerInfo(_objectSpread(_objectSpread({},customerInfo),{},{name:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"\\u7535\\u8BDD *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:customerInfo.phone,onChange:e=>setCustomerInfo(_objectSpread(_objectSpread({},customerInfo),{},{phone:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"\\u914D\\u9001\\u5730\\u5740 *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:customerInfo.address,onChange:e=>setCustomerInfo(_objectSpread(_objectSpread({},customerInfo),{},{address:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"\\u5907\\u6CE8\"}),/*#__PURE__*/_jsx(\"textarea\",{value:customerInfo.notes,onChange:e=>setCustomerInfo(_objectSpread(_objectSpread({},customerInfo),{},{notes:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500\",rows:3})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 border-t pt-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-semibold\",children:\"\\u603B\\u8BA1\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xl font-bold text-orange-500\",children:[\"\\uD83D\\uDC97\",getTotalPrice()]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg transition-colors duration-200\",disabled:loading,children:\"\\u53D6\\u6D88\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"flex-1 bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200\",disabled:loading,children:loading?'Êèê‰∫§‰∏≠...':'Á°ÆËÆ§‰∏ãÂçï'})]})]})]})})]});};export default CheckoutModal;","map":{"version":3,"names":["React","useState","axios","useCart","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CheckoutModal","_ref","isOpen","onClose","onSuccess","cartItems","getTotalPrice","customerInfo","setCustomerInfo","name","phone","address","notes","loading","setLoading","handleSubmit","e","preventDefault","alert","response","post","items","total","data","success","concat","orderId","error","console","children","className","onClick","stopPropagation","onSubmit","type","value","onChange","_objectSpread","target","required","rows","disabled"],"sources":["/Users/howiewang/Downloads/restaurant-ordering/frontend/src/components/CheckoutModal.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport { useCart } from '../contexts/CartContext';\nimport { CustomerInfo } from '../types';\n\ninterface CheckoutModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess: () => void;\n}\n\nconst CheckoutModal: React.FC<CheckoutModalProps> = ({ isOpen, onClose, onSuccess }) => {\n  const { cartItems, getTotalPrice } = useCart();\n  const [customerInfo, setCustomerInfo] = useState<CustomerInfo>({\n    name: '',\n    phone: '',\n    address: '',\n    notes: '',\n  });\n  const [loading, setLoading] = useState(false);\n\n  if (!isOpen) return null;\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!customerInfo.name || !customerInfo.phone || !customerInfo.address) {\n      alert('ËØ∑Â°´ÂÜôÂÆåÊï¥ÁöÑÈÖçÈÄÅ‰ø°ÊÅØ');\n      return;\n    }\n\n    setLoading(true);\n    \n    try {\n      const response = await axios.post('/api/orders', {\n        items: cartItems,\n        total: getTotalPrice(),\n        customerInfo,\n      });\n\n      if (response.data.success) {\n        alert(`ËÆ¢ÂçïÊèê‰∫§ÊàêÂäüÔºÅËÆ¢ÂçïÂè∑Ôºö${response.data.orderId}`);\n        onSuccess();\n      }\n    } catch (error) {\n      alert('ËÆ¢ÂçïÊèê‰∫§Â§±Ë¥•ÔºåËØ∑ÈáçËØï');\n      console.error('Order submission error:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <>\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50\" onClick={onClose} />\n      <div className=\"fixed inset-0 flex items-center justify-center z-50 p-4\">\n        <div className=\"bg-white rounded-lg shadow-xl max-w-md w-full p-6\" onClick={(e) => e.stopPropagation()}>\n          <h2 className=\"text-2xl font-bold mb-4 text-gray-800\">Á°ÆËÆ§ËÆ¢Âçï</h2>\n          \n          <form onSubmit={handleSubmit}>\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  ÂßìÂêç *\n                </label>\n                <input\n                  type=\"text\"\n                  value={customerInfo.name}\n                  onChange={(e) => setCustomerInfo({ ...customerInfo, name: e.target.value })}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500\"\n                  required\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  ÁîµËØù *\n                </label>\n                <input\n                  type=\"tel\"\n                  value={customerInfo.phone}\n                  onChange={(e) => setCustomerInfo({ ...customerInfo, phone: e.target.value })}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500\"\n                  required\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  ÈÖçÈÄÅÂú∞ÂùÄ *\n                </label>\n                <input\n                  type=\"text\"\n                  value={customerInfo.address}\n                  onChange={(e) => setCustomerInfo({ ...customerInfo, address: e.target.value })}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500\"\n                  required\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Â§áÊ≥®\n                </label>\n                <textarea\n                  value={customerInfo.notes}\n                  onChange={(e) => setCustomerInfo({ ...customerInfo, notes: e.target.value })}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500\"\n                  rows={3}\n                />\n              </div>\n            </div>\n\n            <div className=\"mt-6 border-t pt-4\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <span className=\"text-lg font-semibold\">ÊÄªËÆ°</span>\n                <span className=\"text-xl font-bold text-orange-500\">\n                  üíó{getTotalPrice()}\n                </span>\n              </div>\n            </div>\n\n            <div className=\"flex space-x-4\">\n              <button\n                type=\"button\"\n                onClick={onClose}\n                className=\"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg transition-colors duration-200\"\n                disabled={loading}\n              >\n                ÂèñÊ∂à\n              </button>\n              <button\n                type=\"submit\"\n                className=\"flex-1 bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200\"\n                disabled={loading}\n              >\n                {loading ? 'Êèê‰∫§‰∏≠...' : 'Á°ÆËÆ§‰∏ãÂçï'}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default CheckoutModal; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}