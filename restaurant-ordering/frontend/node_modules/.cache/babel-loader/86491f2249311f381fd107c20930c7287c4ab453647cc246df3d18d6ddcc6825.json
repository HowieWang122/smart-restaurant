{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{CartProvider}from'./contexts/CartContext';import CategoryList from'./components/CategoryList';import DishCard from'./components/DishCard';import Cart from'./components/Cart';import{useCart}from'./contexts/CartContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AppContent=()=>{var _categories$find;const[categories,setCategories]=useState([]);const[dishes,setDishes]=useState([]);const[selectedCategory,setSelectedCategory]=useState('');const[showCart,setShowCart]=useState(false);const{getTotalItems}=useCart();useEffect(()=>{fetchMenu();},[]);const fetchMenu=async()=>{try{const response=await axios.get('/api/menu');const{categories,dishes}=response.data;setCategories(categories);setDishes(dishes);if(categories.length>0){setSelectedCategory(categories[0].id);}}catch(error){console.error('Error fetching menu:',error);}};const filteredDishes=dishes.filter(dish=>dish.categoryId===selectedCategory);return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"bg-white shadow-md sticky top-0 z-30\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center px-6 py-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-orange-600\",children:\"Howie\\u7F8E\\u5473\\u5927\\u996D\\u5802\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCart(true),className:\"relative bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg transition-colors duration-200\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z\"})}),\"\\u8D2D\\u7269\\u8F66\",getTotalItems()>0&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 bg-white text-orange-500 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold\",children:getTotalItems()})]})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(CategoryList,{categories:categories,selectedCategory:selectedCategory,onSelectCategory:setSelectedCategory}),/*#__PURE__*/_jsxs(\"main\",{className:\"flex-1 p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800\",children:((_categories$find=categories.find(c=>c.id===selectedCategory))===null||_categories$find===void 0?void 0:_categories$find.name)||'菜品列表'}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mt-1\",children:[\"\\u5171 \",filteredDishes.length,\" \\u9053\\u83DC\\u54C1\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\",children:filteredDishes.map(dish=>/*#__PURE__*/_jsx(DishCard,{dish:dish},dish.id))})]})]}),/*#__PURE__*/_jsx(Cart,{isOpen:showCart,onClose:()=>setShowCart(false)})]});};function App(){return/*#__PURE__*/_jsx(CartProvider,{children:/*#__PURE__*/_jsx(AppContent,{})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","axios","CartProvider","CategoryList","DishCard","Cart","useCart","jsx","_jsx","jsxs","_jsxs","AppContent","_categories$find","categories","setCategories","dishes","setDishes","selectedCategory","setSelectedCategory","showCart","setShowCart","getTotalItems","fetchMenu","response","get","data","length","id","error","console","filteredDishes","filter","dish","categoryId","className","children","onClick","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","onSelectCategory","find","c","name","map","isOpen","onClose","App"],"sources":["/Users/howiewang/Downloads/restaurant-ordering/frontend/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { CartProvider } from './contexts/CartContext';\nimport CategoryList from './components/CategoryList';\nimport DishCard from './components/DishCard';\nimport Cart from './components/Cart';\nimport { Category, Dish } from './types';\nimport { useCart } from './contexts/CartContext';\n\nconst AppContent: React.FC = () => {\n  const [categories, setCategories] = useState<Category[]>([]);\n  const [dishes, setDishes] = useState<Dish[]>([]);\n  const [selectedCategory, setSelectedCategory] = useState<string>('');\n  const [showCart, setShowCart] = useState(false);\n  const { getTotalItems } = useCart();\n\n  useEffect(() => {\n    fetchMenu();\n  }, []);\n\n  const fetchMenu = async () => {\n    try {\n      const response = await axios.get('/api/menu');\n      const { categories, dishes } = response.data;\n      setCategories(categories);\n      setDishes(dishes);\n      if (categories.length > 0) {\n        setSelectedCategory(categories[0].id);\n      }\n    } catch (error) {\n      console.error('Error fetching menu:', error);\n    }\n  };\n\n  const filteredDishes = dishes.filter(dish => dish.categoryId === selectedCategory);\n\n  return (\n    <div className=\"min-h-screen bg-gray-100\">\n      {/* Header */}\n      <header className=\"bg-white shadow-md sticky top-0 z-30\">\n        <div className=\"flex justify-between items-center px-6 py-4\">\n          <h1 className=\"text-2xl font-bold text-orange-600\">Howie美味大饭堂</h1>\n          <button\n            onClick={() => setShowCart(true)}\n            className=\"relative bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg transition-colors duration-200\"\n          >\n            <span className=\"flex items-center\">\n              <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z\" />\n              </svg>\n              购物车\n              {getTotalItems() > 0 && (\n                <span className=\"ml-2 bg-white text-orange-500 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold\">\n                  {getTotalItems()}\n                </span>\n              )}\n            </span>\n          </button>\n        </div>\n      </header>\n\n      <div className=\"flex\">\n        {/* Category Sidebar */}\n        <CategoryList\n          categories={categories}\n          selectedCategory={selectedCategory}\n          onSelectCategory={setSelectedCategory}\n        />\n\n        {/* Main Content */}\n        <main className=\"flex-1 p-6\">\n          <div className=\"mb-6\">\n            <h2 className=\"text-2xl font-bold text-gray-800\">\n              {categories.find(c => c.id === selectedCategory)?.name || '菜品列表'}\n            </h2>\n            <p className=\"text-gray-600 mt-1\">共 {filteredDishes.length} 道菜品</p>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n            {filteredDishes.map((dish) => (\n              <DishCard key={dish.id} dish={dish} />\n            ))}\n          </div>\n        </main>\n      </div>\n\n      {/* Cart Sidebar */}\n      <Cart isOpen={showCart} onClose={() => setShowCart(false)} />\n    </div>\n  );\n};\n\nfunction App() {\n  return (\n    <CartProvider>\n      <AppContent />\n    </CartProvider>\n  );\n}\n\nexport default App; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,YAAY,KAAQ,wBAAwB,CACrD,MAAO,CAAAC,YAAY,KAAM,2BAA2B,CACpD,MAAO,CAAAC,QAAQ,KAAM,uBAAuB,CAC5C,MAAO,CAAAC,IAAI,KAAM,mBAAmB,CAEpC,OAASC,OAAO,KAAQ,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEjD,KAAM,CAAAC,UAAoB,CAAGA,CAAA,GAAM,KAAAC,gBAAA,CACjC,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAGf,QAAQ,CAAa,EAAE,CAAC,CAC5D,KAAM,CAACgB,MAAM,CAAEC,SAAS,CAAC,CAAGjB,QAAQ,CAAS,EAAE,CAAC,CAChD,KAAM,CAACkB,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGnB,QAAQ,CAAS,EAAE,CAAC,CACpE,KAAM,CAACoB,QAAQ,CAAEC,WAAW,CAAC,CAAGrB,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAAEsB,aAAc,CAAC,CAAGf,OAAO,CAAC,CAAC,CAEnCN,SAAS,CAAC,IAAM,CACdsB,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAA,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAtB,KAAK,CAACuB,GAAG,CAAC,WAAW,CAAC,CAC7C,KAAM,CAAEX,UAAU,CAAEE,MAAO,CAAC,CAAGQ,QAAQ,CAACE,IAAI,CAC5CX,aAAa,CAACD,UAAU,CAAC,CACzBG,SAAS,CAACD,MAAM,CAAC,CACjB,GAAIF,UAAU,CAACa,MAAM,CAAG,CAAC,CAAE,CACzBR,mBAAmB,CAACL,UAAU,CAAC,CAAC,CAAC,CAACc,EAAE,CAAC,CACvC,CACF,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAC9C,CACF,CAAC,CAED,KAAM,CAAAE,cAAc,CAAGf,MAAM,CAACgB,MAAM,CAACC,IAAI,EAAIA,IAAI,CAACC,UAAU,GAAKhB,gBAAgB,CAAC,CAElF,mBACEP,KAAA,QAAKwB,SAAS,CAAC,0BAA0B,CAAAC,QAAA,eAEvC3B,IAAA,WAAQ0B,SAAS,CAAC,sCAAsC,CAAAC,QAAA,cACtDzB,KAAA,QAAKwB,SAAS,CAAC,6CAA6C,CAAAC,QAAA,eAC1D3B,IAAA,OAAI0B,SAAS,CAAC,oCAAoC,CAAAC,QAAA,CAAC,qCAAU,CAAI,CAAC,cAClE3B,IAAA,WACE4B,OAAO,CAAEA,CAAA,GAAMhB,WAAW,CAAC,IAAI,CAAE,CACjCc,SAAS,CAAC,2GAA2G,CAAAC,QAAA,cAErHzB,KAAA,SAAMwB,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eACjC3B,IAAA,QAAK0B,SAAS,CAAC,cAAc,CAACG,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAAJ,QAAA,cACjF3B,IAAA,SAAMgC,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAE,CAAE,CAACC,CAAC,CAAC,sJAAsJ,CAAE,CAAC,CAC3N,CAAC,qBAEN,CAACtB,aAAa,CAAC,CAAC,CAAG,CAAC,eAClBb,IAAA,SAAM0B,SAAS,CAAC,uGAAuG,CAAAC,QAAA,CACpHd,aAAa,CAAC,CAAC,CACZ,CACP,EACG,CAAC,CACD,CAAC,EACN,CAAC,CACA,CAAC,cAETX,KAAA,QAAKwB,SAAS,CAAC,MAAM,CAAAC,QAAA,eAEnB3B,IAAA,CAACL,YAAY,EACXU,UAAU,CAAEA,UAAW,CACvBI,gBAAgB,CAAEA,gBAAiB,CACnC2B,gBAAgB,CAAE1B,mBAAoB,CACvC,CAAC,cAGFR,KAAA,SAAMwB,SAAS,CAAC,YAAY,CAAAC,QAAA,eAC1BzB,KAAA,QAAKwB,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnB3B,IAAA,OAAI0B,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAC7C,EAAAvB,gBAAA,CAAAC,UAAU,CAACgC,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACnB,EAAE,GAAKV,gBAAgB,CAAC,UAAAL,gBAAA,iBAA/CA,gBAAA,CAAiDmC,IAAI,GAAI,MAAM,CAC9D,CAAC,cACLrC,KAAA,MAAGwB,SAAS,CAAC,oBAAoB,CAAAC,QAAA,EAAC,SAAE,CAACL,cAAc,CAACJ,MAAM,CAAC,qBAAI,EAAG,CAAC,EAChE,CAAC,cAENlB,IAAA,QAAK0B,SAAS,CAAC,qEAAqE,CAAAC,QAAA,CACjFL,cAAc,CAACkB,GAAG,CAAEhB,IAAI,eACvBxB,IAAA,CAACJ,QAAQ,EAAe4B,IAAI,CAAEA,IAAK,EAApBA,IAAI,CAACL,EAAiB,CACtC,CAAC,CACC,CAAC,EACF,CAAC,EACJ,CAAC,cAGNnB,IAAA,CAACH,IAAI,EAAC4C,MAAM,CAAE9B,QAAS,CAAC+B,OAAO,CAAEA,CAAA,GAAM9B,WAAW,CAAC,KAAK,CAAE,CAAE,CAAC,EAC1D,CAAC,CAEV,CAAC,CAED,QAAS,CAAA+B,GAAGA,CAAA,CAAG,CACb,mBACE3C,IAAA,CAACN,YAAY,EAAAiC,QAAA,cACX3B,IAAA,CAACG,UAAU,GAAE,CAAC,CACF,CAAC,CAEnB,CAEA,cAAe,CAAAwC,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}