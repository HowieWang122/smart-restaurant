{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{AuthProvider,useAuth}from'./contexts/AuthContext';import{CartProvider}from'./contexts/CartContext';import CategoryList from'./components/CategoryList';import DishCard from'./components/DishCard';import Cart from'./components/Cart';import RechargeRequestModal from'./components/RechargeRequestModal';import HeartTransactions from'./components/HeartTransactions';import LoginForm from'./components/LoginForm';import AdminDashboard from'./components/AdminDashboard';import UserMenu from'./components/UserMenu';import{useCart}from'./contexts/CartContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AppContent=()=>{var _dailyDiscounts$disco,_categories$find,_dailyDiscounts$disco2;const[categories,setCategories]=useState([]);const[dishes,setDishes]=useState([]);const[selectedCategory,setSelectedCategory]=useState('');const[showCart,setShowCart]=useState(false);const[showRecharge,setShowRecharge]=useState(false);const[showTransactions,setShowTransactions]=useState(false);const[dailyDiscounts,setDailyDiscounts]=useState(null);const[isPersonalizedDiscounts,setIsPersonalizedDiscounts]=useState(false);const[isRefreshingDiscounts,setIsRefreshingDiscounts]=useState(false);const{user,isLoading}=useAuth();const{getTotalItems,heartValue,fetchHeartValue}=useCart();useEffect(()=>{fetchMenu();},[]);const fetchMenu=async()=>{try{const response=await axios.get('/api/menu');const{categories,dishes,dailyDiscounts,isPersonalized}=response.data;setCategories(categories);setDishes(dishes);setDailyDiscounts(dailyDiscounts);setIsPersonalizedDiscounts(isPersonalized||false);if(categories.length>0){setSelectedCategory(categories[0].id);}}catch(error){console.error('Error fetching menu:',error);}};const refreshDiscounts=async()=>{if(isRefreshingDiscounts)return;setIsRefreshingDiscounts(true);try{const response=await axios.post('/api/refresh-discounts');const{discountData,message}=response.data;setDailyDiscounts(discountData);setIsPersonalizedDiscounts(true);// Manually refreshed discounts are always personalised\nfetchHeartValue();// Refresh heart value display\nalert(message);}catch(error){var _error$response,_error$response$data;const errorMessage=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to refresh personalised discounts, please try again later';alert(errorMessage);}finally{setIsRefreshingDiscounts(false);}};const filteredDishes=dishes.filter(dish=>dish.categoryId===selectedCategory);// Get discount information for dishes\nconst getDishDiscountInfo=dishId=>{if(!dailyDiscounts||!dailyDiscounts.discountedItems)return undefined;return dailyDiscounts.discountedItems.find(item=>item.id===dishId);};// Show loading animation if authentication is loading\nif(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Loading, please wait...\"})]})});}// Show login form if not logged in\nif(!user){return/*#__PURE__*/_jsx(LoginForm,{});}// Show admin interface if admin account\nif(user.isAdmin){return/*#__PURE__*/_jsx(AdminDashboard,{});}// Regular user shows ordering interface\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"bg-white shadow-md sticky top-0 z-30\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center px-6 py-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-orange-600\",children:\"Kristy's Exclusive Restaurant\"}),/*#__PURE__*/_jsx(UserMenu,{username:user.username})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-pink-100 px-4 py-2 rounded-lg\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-pink-600 font-semibold mr-2\",children:\"Heart Value\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xl font-bold text-pink-600\",children:[\"\\uD83D\\uDC93\",heartValue]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-2 flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowTransactions(true),className:\"bg-pink-400 hover:bg-pink-500 text-white px-2 py-1 rounded text-sm transition-colors duration-200\",children:\"History\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowRecharge(true),className:\"bg-pink-500 hover:bg-pink-600 text-white px-2 py-1 rounded text-sm transition-colors duration-200\",children:\"Recharge\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[isPersonalizedDiscounts&&(dailyDiscounts===null||dailyDiscounts===void 0?void 0:(_dailyDiscounts$disco=dailyDiscounts.discountedItems)===null||_dailyDiscounts$disco===void 0?void 0:_dailyDiscounts$disco.length)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-3 py-1 rounded-full text-xs font-bold flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-1\",children:\"\\u2728\"}),\"Personalised Discounts\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:refreshDiscounts,disabled:isRefreshingDiscounts||heartValue<100,className:\"px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 \".concat(isRefreshingDiscounts||heartValue<100?'bg-gray-300 text-gray-500 cursor-not-allowed':'bg-orange-500 hover:bg-orange-600 text-white hover:scale-105'),children:isRefreshingDiscounts?/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"}),\"Refreshing...\"]}):\"\\uD83C\\uDFB2 Refresh Personalised Discounts (\\uD83D\\uDC93100)\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCart(true),className:\"relative bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg transition-colors duration-200\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z\"})}),\"Cart\",getTotalItems()>0&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 bg-white text-orange-500 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold\",children:getTotalItems()})]})})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(CategoryList,{categories:categories,selectedCategory:selectedCategory,onSelectCategory:setSelectedCategory}),/*#__PURE__*/_jsxs(\"main\",{className:\"flex-1 p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800\",children:((_categories$find=categories.find(c=>c.id===selectedCategory))===null||_categories$find===void 0?void 0:_categories$find.name)||'Dish List'}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mt-1\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"Total \",filteredDishes.length,\" dishes\"]}),isPersonalizedDiscounts&&(dailyDiscounts===null||dailyDiscounts===void 0?void 0:(_dailyDiscounts$disco2=dailyDiscounts.discountedItems)===null||_dailyDiscounts$disco2===void 0?void 0:_dailyDiscounts$disco2.length)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-lg px-3 py-2 text-sm text-blue-700\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"\\uD83C\\uDFAF Exclusive Benefits:\"}),\"You have \",dailyDiscounts.discountedItems.length,\" personalised discounts, updated daily\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\",children:filteredDishes.map(dish=>{const discountInfo=getDishDiscountInfo(dish.id);return/*#__PURE__*/_jsx(DishCard,{dish:dish,discountInfo:discountInfo},dish.id);})})]})]}),/*#__PURE__*/_jsx(Cart,{isOpen:showCart,onClose:()=>setShowCart(false),onOpenRecharge:()=>{// Close cart, open header recharge request\nsetShowCart(false);setShowRecharge(true);}}),/*#__PURE__*/_jsx(RechargeRequestModal,{isOpen:showRecharge,onClose:()=>setShowRecharge(false),currentHeartValue:heartValue,onSuccess:()=>{setShowRecharge(false);fetchHeartValue();// Refresh heart value display\n}}),/*#__PURE__*/_jsx(HeartTransactions,{isOpen:showTransactions,onClose:()=>setShowTransactions(false)})]});};function App(){return/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsx(CartProvider,{children:/*#__PURE__*/_jsx(AppContent,{})})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","axios","AuthProvider","useAuth","CartProvider","CategoryList","DishCard","Cart","RechargeRequestModal","HeartTransactions","LoginForm","AdminDashboard","UserMenu","useCart","jsx","_jsx","jsxs","_jsxs","AppContent","_dailyDiscounts$disco","_categories$find","_dailyDiscounts$disco2","categories","setCategories","dishes","setDishes","selectedCategory","setSelectedCategory","showCart","setShowCart","showRecharge","setShowRecharge","showTransactions","setShowTransactions","dailyDiscounts","setDailyDiscounts","isPersonalizedDiscounts","setIsPersonalizedDiscounts","isRefreshingDiscounts","setIsRefreshingDiscounts","user","isLoading","getTotalItems","heartValue","fetchHeartValue","fetchMenu","response","get","isPersonalized","data","length","id","error","console","refreshDiscounts","post","discountData","message","alert","_error$response","_error$response$data","errorMessage","filteredDishes","filter","dish","categoryId","getDishDiscountInfo","dishId","discountedItems","undefined","find","item","className","children","isAdmin","username","onClick","disabled","concat","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","onSelectCategory","c","name","map","discountInfo","isOpen","onClose","onOpenRecharge","currentHeartValue","onSuccess","App"],"sources":["/Users/howiewang/Downloads/progrem/restaurant-ordering/frontend/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { AuthProvider, useAuth } from './contexts/AuthContext';\nimport { CartProvider } from './contexts/CartContext';\nimport CategoryList from './components/CategoryList';\nimport DishCard from './components/DishCard';\nimport Cart from './components/Cart';\nimport RechargeRequestModal from './components/RechargeRequestModal';\nimport HeartTransactions from './components/HeartTransactions';\nimport LoginForm from './components/LoginForm';\nimport AdminDashboard from './components/AdminDashboard';\nimport UserMenu from './components/UserMenu';\nimport { Category, Dish } from './types';\nimport { useCart } from './contexts/CartContext';\n\nconst AppContent: React.FC = () => {\n  const [categories, setCategories] = useState<Category[]>([]);\n  const [dishes, setDishes] = useState<Dish[]>([]);\n  const [selectedCategory, setSelectedCategory] = useState<string>('');\n  const [showCart, setShowCart] = useState(false);\n  const [showRecharge, setShowRecharge] = useState(false);\n  const [showTransactions, setShowTransactions] = useState(false);\n  const [dailyDiscounts, setDailyDiscounts] = useState<any>(null);\n  const [isPersonalizedDiscounts, setIsPersonalizedDiscounts] = useState(false);\n  const [isRefreshingDiscounts, setIsRefreshingDiscounts] = useState(false);\n  const { user, isLoading } = useAuth();\n  const { getTotalItems, heartValue, fetchHeartValue } = useCart();\n\n  useEffect(() => {\n    fetchMenu();\n  }, []);\n\n  const fetchMenu = async () => {\n    try {\n      const response = await axios.get('/api/menu');\n      const { categories, dishes, dailyDiscounts, isPersonalized } = response.data;\n      setCategories(categories);\n      setDishes(dishes);\n      setDailyDiscounts(dailyDiscounts);\n      setIsPersonalizedDiscounts(isPersonalized || false);\n      if (categories.length > 0) {\n        setSelectedCategory(categories[0].id);\n      }\n    } catch (error) {\n      console.error('Error fetching menu:', error);\n    }\n  };\n\n  const refreshDiscounts = async () => {\n    if (isRefreshingDiscounts) return;\n    \n    setIsRefreshingDiscounts(true);\n    try {\n      const response = await axios.post('/api/refresh-discounts');\n      const { discountData, message } = response.data;\n      \n      setDailyDiscounts(discountData);\n      setIsPersonalizedDiscounts(true); // Manually refreshed discounts are always personalised\n      fetchHeartValue(); // Refresh heart value display\n      \n      alert(message);\n    } catch (error: any) {\n      const errorMessage = error.response?.data?.message || 'Failed to refresh personalised discounts, please try again later';\n      alert(errorMessage);\n    } finally {\n      setIsRefreshingDiscounts(false);\n    }\n  };\n\n  const filteredDishes = dishes.filter(dish => dish.categoryId === selectedCategory);\n\n  // Get discount information for dishes\n  const getDishDiscountInfo = (dishId: number) => {\n    if (!dailyDiscounts || !dailyDiscounts.discountedItems) return undefined;\n    return dailyDiscounts.discountedItems.find((item: any) => item.id === dishId);\n  };\n\n  // Show loading animation if authentication is loading\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-100\">\n        <div className=\"text-center\">\n          <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mb-4\"></div>\n          <p className=\"text-gray-600\">Loading, please wait...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Show login form if not logged in\n  if (!user) {\n    return <LoginForm />;\n  }\n\n  // Show admin interface if admin account\n  if (user.isAdmin) {\n    return <AdminDashboard />;\n  }\n\n  // Regular user shows ordering interface\n  return (\n    <div className=\"min-h-screen bg-gray-100\">\n      {/* Header */}\n      <header className=\"bg-white shadow-md sticky top-0 z-30\">\n        <div className=\"flex justify-between items-center px-6 py-4\">\n          <div className=\"flex items-center\">\n            <h1 className=\"text-2xl font-bold text-orange-600\">Kristy's Exclusive Restaurant</h1>\n            <UserMenu username={user.username} />\n          </div>\n          <div className=\"flex items-center space-x-4\">\n            {/* Heart value display */}\n            <div className=\"flex items-center bg-pink-100 px-4 py-2 rounded-lg\">\n              <span className=\"text-pink-600 font-semibold mr-2\">Heart Value</span>\n              <span className=\"text-xl font-bold text-pink-600\">ðŸ’“{heartValue}</span>\n              <div className=\"ml-2 flex space-x-2\">\n                <button\n                  onClick={() => setShowTransactions(true)}\n                  className=\"bg-pink-400 hover:bg-pink-500 text-white px-2 py-1 rounded text-sm transition-colors duration-200\"\n                >\n                  History\n                </button>\n                <button\n                  onClick={() => setShowRecharge(true)}\n                  className=\"bg-pink-500 hover:bg-pink-600 text-white px-2 py-1 rounded text-sm transition-colors duration-200\"\n                >\n                  Recharge\n                </button>\n              </div>\n            </div>\n            \n            {/* Personalised discount indicator and refresh button */}\n            <div className=\"flex items-center space-x-2\">\n              {isPersonalizedDiscounts && dailyDiscounts?.discountedItems?.length > 0 && (\n                <div className=\"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-3 py-1 rounded-full text-xs font-bold flex items-center\">\n                  <span className=\"mr-1\">âœ¨</span>\n                  Personalised Discounts\n                </div>\n              )}\n              <button\n                onClick={refreshDiscounts}\n                disabled={isRefreshingDiscounts || heartValue < 100}\n                className={`px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${\n                  isRefreshingDiscounts || heartValue < 100\n                    ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                    : 'bg-orange-500 hover:bg-orange-600 text-white hover:scale-105'\n                }`}\n              >\n                {isRefreshingDiscounts ? (\n                  <span className=\"flex items-center\">\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                    Refreshing...\n                  </span>\n                ) : (\n                  `ðŸŽ² Refresh Personalised Discounts (ðŸ’“100)`\n                )}\n              </button>\n            </div>\n            \n            {/* Shopping cart button */}\n            <button\n              onClick={() => setShowCart(true)}\n              className=\"relative bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg transition-colors duration-200\"\n            >\n              <span className=\"flex items-center\">\n                <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z\" />\n                </svg>\n                Cart\n                {getTotalItems() > 0 && (\n                  <span className=\"ml-2 bg-white text-orange-500 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold\">\n                    {getTotalItems()}\n                  </span>\n                )}\n              </span>\n            </button>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"flex\">\n        {/* Category Sidebar */}\n        <CategoryList\n          categories={categories}\n          selectedCategory={selectedCategory}\n          onSelectCategory={setSelectedCategory}\n        />\n\n        {/* Main Content */}\n        <main className=\"flex-1 p-6\">\n          <div className=\"mb-6\">\n            <h2 className=\"text-2xl font-bold text-gray-800\">\n              {categories.find(c => c.id === selectedCategory)?.name || 'Dish List'}\n            </h2>\n            <div className=\"flex items-center justify-between mt-1\">\n              <p className=\"text-gray-600\">Total {filteredDishes.length} dishes</p>\n              {isPersonalizedDiscounts && dailyDiscounts?.discountedItems?.length > 0 && (\n                <div className=\"bg-blue-50 border border-blue-200 rounded-lg px-3 py-2 text-sm text-blue-700\">\n                  <span className=\"font-semibold\">ðŸŽ¯ Exclusive Benefits:</span>\n                  You have {dailyDiscounts.discountedItems.length} personalised discounts, updated daily\n                </div>\n              )}\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n            {filteredDishes.map((dish) => {\n              const discountInfo = getDishDiscountInfo(dish.id);\n              return (\n                <DishCard \n                  key={dish.id} \n                  dish={dish} \n                  discountInfo={discountInfo}\n                />\n              );\n            })}\n          </div>\n        </main>\n      </div>\n\n      {/* Cart Sidebar */}\n      <Cart \n        isOpen={showCart} \n        onClose={() => setShowCart(false)} \n        onOpenRecharge={() => {\n          // Close cart, open header recharge request\n          setShowCart(false);\n          setShowRecharge(true);\n        }}\n      />\n      \n      {/* Recharge request modal */}\n      <RechargeRequestModal \n        isOpen={showRecharge} \n        onClose={() => setShowRecharge(false)} \n        currentHeartValue={heartValue}\n        onSuccess={() => {\n          setShowRecharge(false);\n          fetchHeartValue(); // Refresh heart value display\n        }}\n      />\n      \n      {/* Heart value transaction history modal */}\n      <HeartTransactions \n        isOpen={showTransactions} \n        onClose={() => setShowTransactions(false)} \n      />\n    </div>\n  );\n};\n\nfunction App() {\n  return (\n    <AuthProvider>\n      <CartProvider>\n        <AppContent />\n      </CartProvider>\n    </AuthProvider>\n  );\n}\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}