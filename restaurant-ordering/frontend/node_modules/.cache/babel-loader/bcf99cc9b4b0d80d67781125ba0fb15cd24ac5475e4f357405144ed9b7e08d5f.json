{"ast":null,"code":"import React,{useState}from'react';import{useCart}from'../contexts/CartContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const RechargeRequestModal=_ref=>{let{isOpen,onClose,currentHeartValue,onSuccess}=_ref;const{submitRechargeRequest}=useCart();const[amount,setAmount]=useState('');const[loading,setLoading]=useState(false);if(!isOpen)return null;const handleSubmit=async e=>{e.preventDefault();const rechargeAmount=parseInt(amount);if(!rechargeAmount||rechargeAmount<=0){alert('ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÂÖÖÂÄºÈáëÈ¢ù');return;}setLoading(true);try{const success=await submitRechargeRequest(rechargeAmount);if(success){alert(\"\\u5145\\u503C\\u7533\\u8BF7\\u5DF2\\u63D0\\u4EA4\\u6210\\u529F\\uFF01\\n\\u7533\\u8BF7\\u91D1\\u989D\\uFF1A\\uD83D\\uDC93\".concat(rechargeAmount,\"\\n\\u8BF7\\u7B49\\u5F85\\u7BA1\\u7406\\u5458\\u5BA1\\u6838\"));setAmount('');onSuccess();}else{alert('Êèê‰∫§Áî≥ËØ∑Â§±Ë¥•ÔºåËØ∑ÈáçËØï');}}catch(error){alert('Êèê‰∫§Áî≥ËØ∑Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•');console.error('Recharge request error:',error);}finally{setLoading(false);}};const handleAmountChange=e=>{const value=e.target.value;// Âè™ÂÖÅËÆ∏ËæìÂÖ•Êï∞Â≠ó\nif(/^\\d*$/.test(value)){setAmount(value);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 z-50\",onClick:onClose}),/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-xl max-w-md w-full p-6\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4 text-pink-600\",children:\"\\u7533\\u8BF7\\u5145\\u503C\\u5FC3\\u52A8\\u503C\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mb-6\",children:[\"\\u5F53\\u524D\\u5FC3\\u52A8\\u503C\\uFF1A\\uD83D\\uDC93\",currentHeartValue]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"\\u5145\\u503C\\u91D1\\u989D * (\\u4EC5\\u9650\\u6570\\u5B57)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:amount,onChange:handleAmountChange,placeholder:\"\\u8BF7\\u8F93\\u5165\\u5145\\u503C\\u91D1\\u989D\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-pink-500\",required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"absolute right-3 top-2 text-pink-500 font-semibold\",children:\"\\uD83D\\uDC93\"})]}),amount&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 mt-1\",children:[\"\\u5145\\u503C\\u540E\\u5C06\\u62E5\\u6709\\uFF1A\\uD83D\\uDC93\",currentHeartValue+parseInt(amount||'0')]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-yellow-800\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"\\u6CE8\\u610F\\uFF1A\"}),\"\\u5145\\u503C\\u7533\\u8BF7\\u63D0\\u4EA4\\u540E\\u9700\\u8981\\u7BA1\\u7406\\u5458\\u5BA1\\u6838\\uFF0C\\u5BA1\\u6838\\u901A\\u8FC7\\u540E\\u5FC3\\u52A8\\u503C\\u624D\\u4F1A\\u5230\\u8D26\\u3002\\u8BF7\\u8010\\u5FC3\\u7B49\\u5F85\\u3002\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg transition-colors duration-200\",disabled:loading,children:\"\\u53D6\\u6D88\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"flex-1 bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200\",disabled:loading,children:loading?'Êèê‰∫§‰∏≠...':'Êèê‰∫§Áî≥ËØ∑'})]})]})]})})]});};export default RechargeRequestModal;","map":{"version":3,"names":["React","useState","useCart","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RechargeRequestModal","_ref","isOpen","onClose","currentHeartValue","onSuccess","submitRechargeRequest","amount","setAmount","loading","setLoading","handleSubmit","e","preventDefault","rechargeAmount","parseInt","alert","success","concat","error","console","handleAmountChange","value","target","test","children","className","onClick","stopPropagation","onSubmit","type","onChange","placeholder","required","disabled"],"sources":["/Users/howiewang/Downloads/progrem/restaurant-ordering/frontend/src/components/RechargeRequestModal.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useCart } from '../contexts/CartContext';\n\ninterface RechargeRequestModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  currentHeartValue: number;\n  onSuccess: () => void;\n}\n\nconst RechargeRequestModal: React.FC<RechargeRequestModalProps> = ({ \n  isOpen, \n  onClose, \n  currentHeartValue, \n  onSuccess\n}) => {\n  const { submitRechargeRequest } = useCart();\n  const [amount, setAmount] = useState<string>('');\n  const [loading, setLoading] = useState(false);\n\n  if (!isOpen) return null;\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    const rechargeAmount = parseInt(amount);\n    \n    if (!rechargeAmount || rechargeAmount <= 0) {\n      alert('ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÂÖÖÂÄºÈáëÈ¢ù');\n      return;\n    }\n\n    setLoading(true);\n    \n    try {\n      const success = await submitRechargeRequest(rechargeAmount);\n      \n      if (success) {\n        alert(`ÂÖÖÂÄºÁî≥ËØ∑Â∑≤Êèê‰∫§ÊàêÂäüÔºÅ\\nÁî≥ËØ∑ÈáëÈ¢ùÔºöüíì${rechargeAmount}\\nËØ∑Á≠âÂæÖÁÆ°ÁêÜÂëòÂÆ°Ê†∏`);\n        setAmount('');\n        onSuccess();\n      } else {\n        alert('Êèê‰∫§Áî≥ËØ∑Â§±Ë¥•ÔºåËØ∑ÈáçËØï');\n      }\n    } catch (error) {\n      alert('Êèê‰∫§Áî≥ËØ∑Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•');\n      console.error('Recharge request error:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAmountChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    // Âè™ÂÖÅËÆ∏ËæìÂÖ•Êï∞Â≠ó\n    if (/^\\d*$/.test(value)) {\n      setAmount(value);\n    }\n  };\n\n  return (\n    <>\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50\" onClick={onClose} />\n      <div className=\"fixed inset-0 flex items-center justify-center z-50 p-4\">\n        <div className=\"bg-white rounded-lg shadow-xl max-w-md w-full p-6\" onClick={(e) => e.stopPropagation()}>\n          <h2 className=\"text-2xl font-bold mb-4 text-pink-600\">Áî≥ËØ∑ÂÖÖÂÄºÂøÉÂä®ÂÄº</h2>\n          <p className=\"text-gray-600 mb-6\">ÂΩìÂâçÂøÉÂä®ÂÄºÔºöüíì{currentHeartValue}</p>\n          \n          <form onSubmit={handleSubmit}>\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  ÂÖÖÂÄºÈáëÈ¢ù * (‰ªÖÈôêÊï∞Â≠ó)\n                </label>\n                <div className=\"relative\">\n                  <input\n                    type=\"text\"\n                    value={amount}\n                    onChange={handleAmountChange}\n                    placeholder=\"ËØ∑ËæìÂÖ•ÂÖÖÂÄºÈáëÈ¢ù\"\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-pink-500\"\n                    required\n                  />\n                  <span className=\"absolute right-3 top-2 text-pink-500 font-semibold\">üíì</span>\n                </div>\n                {amount && (\n                  <p className=\"text-sm text-gray-500 mt-1\">\n                    ÂÖÖÂÄºÂêéÂ∞ÜÊã•ÊúâÔºöüíì{currentHeartValue + parseInt(amount || '0')}\n                  </p>\n                )}\n              </div>\n\n\n            </div>\n\n            <div className=\"mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n              <p className=\"text-sm text-yellow-800\">\n                <span className=\"font-semibold\">Ê≥®ÊÑèÔºö</span>\n                ÂÖÖÂÄºÁî≥ËØ∑Êèê‰∫§ÂêéÈúÄË¶ÅÁÆ°ÁêÜÂëòÂÆ°Ê†∏ÔºåÂÆ°Ê†∏ÈÄöËøáÂêéÂøÉÂä®ÂÄºÊâç‰ºöÂà∞Ë¥¶„ÄÇËØ∑ËÄêÂøÉÁ≠âÂæÖ„ÄÇ\n              </p>\n            </div>\n\n            <div className=\"flex space-x-4 mt-6\">\n              <button\n                type=\"button\"\n                onClick={onClose}\n                className=\"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg transition-colors duration-200\"\n                disabled={loading}\n              >\n                ÂèñÊ∂à\n              </button>\n              <button\n                type=\"submit\"\n                className=\"flex-1 bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200\"\n                disabled={loading}\n              >\n                {loading ? 'Êèê‰∫§‰∏≠...' : 'Êèê‰∫§Áî≥ËØ∑'}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default RechargeRequestModal; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}